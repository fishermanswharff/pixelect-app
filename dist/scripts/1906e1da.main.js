var getImageData=function(a,b){var b=b;$.ajax({url:"https://polar-chamber-4218.herokuapp.com/amazon/sign_key",type:"GET",data:{file_name:"url.jpg"}}).done(function(c){var d=c,e=new FormData,f={image:{image_set_id:b,url:"http://pixelectapp.s3.amazonaws.com/"+d.key}};$.ajax({url:"https://polar-chamber-4218.herokuapp.com/image_sets/"+b+"/images",type:"POST",data:f}).done(function(){e.append("Policy",d.policy),e.append("Signature",d.signature),e.append("acl",d.acl),e.append("success_action_status",d.sas),e.append("AWSAccessKeyId",d.access_key),e.append("key",d.key),e.append("file",a),postImageData(e,d.key)})})},postImageData=function(a,b){$.ajax({url:"http://pixelectapp.s3.amazonaws.com/",type:"POST",data:a,processData:!1,contentType:!1}).done(function(){var a="http://pixelectapp.s3.amazonaws.com/"+b,c=$("<img>").attr("src",a);$("#images").append(c)})},Router=Backbone.Router.extend({routes:{"":"home",home:"home",sign_up:"sign_up",sign_in:"sign_in",upload:"upload",about:"about","show_album/:id":"show_album"},sign_in:function(){$("#handlebarsContainer").empty();var a=Handlebars.compile($("#sign_inTemplate").html());$("#handlebarsContainer").html(a({}))},sign_up:function(){$("#handlebarsContainer").empty();var a=Handlebars.compile($("#sign_upTemplate").html());$("#handlebarsContainer").html(a({}))},upload:function(){$("#handlebarsContainer").empty();var a=Handlebars.compile($("#uploadTemplate").html());$("#handlebarsContainer").html(a({})),console.log($("#upImg1").val()),$("#submitupImg").on("click",function(a){a.preventDefault();var b=0;$.ajax({url:"https://polar-chamber-4218.herokuapp.com/image_sets",type:"POST",data:{image_set:{question:$("#question").val()}}}).done(function(a){console.log($("#upImg1")[0]),b=a.id;var c=$("#upImg1")[0].files[0];console.log($("#upImg1")[0]);for(var d=$("#upImg2")[0].files[0],e=$("#upImg3")[0].files[0],f=[c,d,e],g=0;g<f.length;g++){var h=getImageData(f[g],b);console.log(h)}window.location.replace("#/show_album/"+b)})})},about:function(){$("#handlebarsContainer").empty();var a=Handlebars.compile($("#aboutTemplate").html());$("#handlebarsContainer").html(a({}))},home:function(){$.ajax({url:"https://polar-chamber-4218.herokuapp.com/image_sets"}).done(function(a){console.log(a);var b=Handlebars.compile($("#homeTemplate").html());$("#handlebarsContainer").html(b({image_sets:a.image_sets})),$("#homeButton").on("click",function(){console.log(this.html())})})},show_album:function(a){$("#handlebarsContainer").empty(),$.ajax({url:"https://polar-chamber-4218.herokuapp.com/image_sets/"+a,type:"GET"}).done(function(a){console.table(a);var b=Handlebars.compile($("#show_albumTemplate").html());$("#handlebarsContainer").html(b({response:a}))})}}),router=new Router;Backbone.history=Backbone.history||new Backbone.History({}),Backbone.history.start(),$(document).ready(function(){$("#imageUpload").submit(function(a){a.preventDefault();for(var b=$('#imageUpload > input[type="file"]'),c=0,d=b.length;d>c;c++){var e=b[c].files[0];getImageData(e)}})});